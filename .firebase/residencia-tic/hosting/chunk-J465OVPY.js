import{a as te,b as oe}from"./chunk-ZFHV64EO.js";import{a as Y,b as Z,c as ee}from"./chunk-DBLGRUHZ.js";import{a as X}from"./chunk-YOEXHNBP.js";import{$ as N,Aa as G,B as x,Ba as O,C as w,Ca as $,Da as j,Ea as q,Fa as M,Ga as B,Ha as W,I as m,J as F,Ja as J,Ka as U,L as C,Ma as H,N as p,Na as R,Oa as K,Pa as Q,Q as s,R as r,S as g,T as y,U as S,V as u,W as D,Y as d,Z as v,_ as k,a as f,aa as T,b as _,ba as A,f as P,ka as V,la as z,ma as L,t as h,x as E,xa as I,y as b}from"./chunk-SFNEE26T.js";function ae(n,o){if(n&1&&(s(0,"option",23),d(1),r()),n&2){let l=o.$implicit;p("value",l.id),m(),k(" ",l.descricao," ")}}function se(n,o){if(n&1&&(s(0,"span"),d(1),r()),n&2){let l=o.$implicit;m(),v(l)}}function le(n,o){if(n&1){let l=y();s(0,"span")(1,"input",31),S("change",function(){let i=x(l).$implicit,e=u().$implicit,a=u(2);return w(a.atualizarAtividade(i,e))}),r()()}if(n&2){let l=o.$implicit,t=u().$implicit;m(),D("checked",t.atividadesCompletas.includes(l)?"checked":"")}}function ce(n,o){if(n&1&&(s(0,"div",30)(1,"span"),d(2),r(),C(3,le,2,1,"span",26),r()),n&2){let l=o.$implicit,t=u(2);m(2),v(l.idPig),m(),p("ngForOf",t.selectedSessao.atividades)}}function de(n,o){if(n&1){let l=y();s(0,"div",24)(1,"div",25)(2,"span"),d(3),r(),s(4,"span"),d(5),r()(),s(6,"div",25)(7,"span"),d(8,"Brinco"),r(),C(9,se,2,1,"span",26),r(),C(10,ce,4,2,"div",27),s(11,"div",28)(12,"button",29),S("click",function(){x(l);let i=u();return w(i.salvarSessao())}),d(13,"Salvar"),r()()()}if(n&2){let l=u();m(3),v(l.formatDate(l.selectedSessao.data)),m(2),v(l.selectedSessao.descricao),m(4),p("ngForOf",l.selectedSessao.atividades),m(),p("ngForOf",l.selectedSessao.porcos)}}function me(n,o){n&1&&g(0,"div",32)}var ie=(()=>{let o=class o{constructor(t){this.storageService=t,this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.sessoes=[],this.selectedSessao={},this.suinos=[],this.cadastroForm=new q({data:new M("",O.required),descricao:new M("",[O.required]),atividades:new M("",[O.required])})}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"item_id",textField:"item_text",selectAllText:"Selecionar Todos",unSelectAllText:"Desmarcar Todos",itemsShowLimit:6,allowSearchFilter:!0};let t=JSON.parse(localStorage.getItem("userData")||"{}");this.storageService.listarSuinos().pipe(P(i=>(this.suinos=Object.keys(i).map(e=>_(f({},i[e]),{id:e})),t&&t.id?this.suinos=this.suinos.filter(e=>e.idUser===t.id):this.suinos=[],this.dropdownList=this.suinos.map(e=>({item_id:e.idPig||"",item_text:e.idPig||""})),this.suinos))).subscribe(),this.storageService.listarSessoes().pipe(P(i=>{this.sessoes=Object.keys(i).map(e=>_(f({},i[e]),{id:e}))})).subscribe()}onSubmit(){if(this.cadastroForm.invalid)return;let t=this.cadastroForm.value,i=localStorage.getItem("userData"),e={idUser:i?JSON.parse(i).id:"",data:t.data||"",descricao:t.descricao||"",atividades:t.atividades?.split(";")||[],porcos:this.selectedItems.map(a=>({idPig:a.item_id,atividadesCompletas:[]}))};this.storageService.addCadastroSessao(e),this.cadastroForm.reset()}onItemSelect(t){this.selectedItems.push(t),console.log(this.selectedItems)}onSelectAll(t){this.selectedItems=t,console.log(this.selectedItems)}onItemDeSelect(t){this.selectedItems=this.selectedItems.filter(i=>i.item_id!==t.item_id),console.log(this.selectedItems)}onDeSelectAll(t){this.selectedItems=[],console.log(this.selectedItems)}exibirSessao(t){let i=t.target.value,e=this.sessoes.map(a=>_(f({},a),{porcos:a.porcos.map(c=>_(f({},c),{atividadesCompletas:c.atividadesCompletas||[]}))}));this.selectedSessao=e.find(a=>a.id===i)||{},console.log(this.selectedSessao)}atualizarAtividade(t,i){let e=this.selectedSessao.porcos.find(a=>a.idPig===i.idPig);e&&(e.atividadesCompletas.includes(t)?e.atividadesCompletas=e.atividadesCompletas.filter(a=>a!==t):e.atividadesCompletas.push(t),this.selectedSessao=_(f({},this.selectedSessao),{porcos:this.selectedSessao.porcos.map(a=>a.idPig===i.idPig?e:a)}))}salvarSessao(){this.storageService.atualizarSessao(this.selectedSessao)}formatDate(t){return new Date(t).toLocaleDateString()}};o.\u0275fac=function(i){return new(i||o)(F(X))},o.\u0275cmp=E({type:o,selectors:[["app-sessao"]],decls:39,vars:8,consts:[[1,"secao","suinoplus","max-width"],["id","suino",1,"topico"],[1,"item"],[1,"containerCadastro"],[1,"formCadastro"],[3,"ngSubmit","formGroup"],[1,"group"],[1,"form-group"],["for","data"],["type","date","formControlName","data","placeholder","Data de ","id","data",1,"form-control"],["for","descricao"],["formControlName","descricao","placeholder","Oque ser\xE1 feito na sess\xE3o?","id","descricao",1,"form-control"],["for","atividades"],["formControlName","atividades","placeholder","Separe as atividades com ;","id","atividades",1,"form-control"],["for","porcos"],[3,"ngModelChange","onSelect","onSelectAll","onDeSelect","onDeSelectAll","placeholder","settings","data","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"secao","suinoplus","tabela"],[3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","max-width tabela-wrapper ",4,"ngIf"],["class","spacing",4,"ngIf"],[3,"value"],[1,"max-width","tabela-wrapper"],[1,"filtros","cabecalho"],[4,"ngFor","ngForOf"],["class","filtros",4,"ngFor","ngForOf"],[2,"width","100%","display","flex","align-items","center"],[3,"click"],[1,"filtros"],["type","checkbox",3,"change","checked"],[1,"spacing"]],template:function(i,e){i&1&&(g(0,"app-header"),s(1,"div",0)(2,"p",1),d(3,"Nova Sess\xE3o"),r(),s(4,"div",2)(5,"div",3)(6,"div",4)(7,"form",5),S("ngSubmit",function(){return e.onSubmit()}),s(8,"div",6)(9,"div",7)(10,"label",8),d(11,"Data"),r(),g(12,"input",9),r(),s(13,"div",7)(14,"label",10),d(15,"Descri\xE7\xE3o"),r(),g(16,"input",11),r()(),s(17,"div",6)(18,"div",7)(19,"label",12),d(20,"Atividades"),r(),g(21,"input",13),r()(),s(22,"div",6)(23,"div",7)(24,"label",14),d(25,"Porcos participantes"),r(),s(26,"ng-multiselect-dropdown",15),A("ngModelChange",function(c){return T(e.selectedItems,c)||(e.selectedItems=c),c}),S("onSelect",function(c){return e.onItemSelect(c)})("onSelectAll",function(c){return e.onSelectAll(c)})("onDeSelect",function(c){return e.onItemDeSelect(c)})("onDeSelectAll",function(c){return e.onDeSelectAll(c)}),r()()(),s(27,"button",16),d(28,"Confirmar"),r()()()()()(),s(29,"div",17)(30,"p",1),d(31,"Escolha uma sess\xE3o"),r(),s(32,"select",18),S("change",function(c){return e.exibirSessao(c)}),s(33,"option",19),d(34,"Selecione a op\xE7\xE3o"),r(),C(35,ae,2,2,"option",20),r(),C(36,de,14,4,"div",21)(37,me,1,0,"div",22),r(),g(38,"app-footer")),i&2&&(m(7),p("formGroup",e.cadastroForm),m(19),p("placeholder","Selecione os porcos")("settings",e.dropdownSettings)("data",e.dropdownList),N("ngModel",e.selectedItems),m(9),p("ngForOf",e.sessoes),m(),p("ngIf",e.selectedSessao.id),m(),p("ngIf",!e.selectedSessao.id))},dependencies:[V,z,W,H,R,G,$,j,J,U,Z,Y,te,B],styles:["form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#2bbd2b}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.ng-valid.ng-touched[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:green}.containerCadastro[_ngcontent-%COMP%]{width:100%;height:100%}.containerCadastro[_ngcontent-%COMP%]   .formCadastro[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%}.containerCadastro[_ngcontent-%COMP%]   .formCadastro[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2rem;width:100%}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:var(--primary-color);font-family:Bebas Neue,sans-serif}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:red;font-style:italic}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.5rem;border:none;border-bottom:2px solid var(--primary-color);background:transparent}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-bottom:2px solid var(--tertiary-color)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;background:var(--tertiary-color);color:#fff;border:none;cursor:pointer;font-size:1rem;width:15rem}.formCadastro[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--tertiary-color)}.formCadastro[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.containerCadastro[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;width:100%;gap:2rem}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:none;border-bottom:2px solid var(--primary-color)}.suinoplus[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:70px 0 30px;justify-content:space-between;align-items:center;width:100%}.topico[_ngcontent-%COMP%]{font-size:1.4rem;border-radius:20px;color:var(--primary-color);text-align:center}.suinoplus[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:70%;border-top-left-radius:100px;border-bottom-right-radius:100px;padding:40px;background:var(--backound-color)}.item[_ngcontent-%COMP%]{align-items:center}.filtros[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 30px;background:var(--backound-color);color:var(--primary-color)}.filtros[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;flex:1;text-align:center}.filtros.cabecalho[_ngcontent-%COMP%]{background:var(--primary-color);font-weight:600;color:#fff}.tabela[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--background2-color)}.tabela[_ngcontent-%COMP%]   .topico[_ngcontent-%COMP%], .tabela[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:var(--backound-color)}.tabela[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--backound-color);outline:none}.tabela[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color)}button[_ngcontent-%COMP%]{padding:.5rem;background:var(--tertiary-color);color:#fff;border:none;cursor:pointer;font-size:1rem;width:15rem;margin:20px auto 0}.spacing[_ngcontent-%COMP%]{padding-block:50px}.tabela-wrapper[_ngcontent-%COMP%]{width:100%;flex:1;margin-block:20px}.tabela-wrapper[_ngcontent-%COMP%]   .cabecalho[_ngcontent-%COMP%]:first-child{border-bottom:1px solid white}"]});let n=o;return n})();var pe=[{path:"",component:ie}],re=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=b({type:o}),o.\u0275inj=h({imports:[I.forChild(pe),I]});let n=o;return n})();var Ne=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=b({type:o}),o.\u0275inj=h({imports:[L,re,Q,ee,oe,K]});let n=o;return n})();export{Ne as ModuloManejoModule};
